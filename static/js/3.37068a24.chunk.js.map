{"version":3,"sources":["components/common/Paggination/Paggination.module.css","components/Users/User/User.module.css","components/common/Paggination/Paggination.jsx","components/Users/User/User.jsx","components/Users/Users.styles.js","components/Users/Users.jsx","../node_modules/reselect/es/index.js","redux/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["module","exports","Paggination","totalItemsCount","pageSize","currentPage","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","pagesList","filter","page","map","className","s","selectedPage","key","onClick","paggination","disabled","ListItem","styled","li","User","userId","smallPhoto","name","status","followed","followingInProgress","onUnfollow","onFollow","id","userPhoto","to","userAvatar","src","defaultUserPhoto","alt","userInfo","userInfoName","userInfoTitle","followingBtn","Button","some","UsersContainer","div","Controls","UsersList","ul","Users","users","totalUsersCount","item","photos","small","defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","length","getDependencies","funcs","dependencies","Array","isArray","every","dep","dependencyTypes","join","Error","createSelector","memoize","_len","arguments","memoizeOptions","_key","_len2","_key2","recomputations","resultFunc","pop","memoizedResultFunc","apply","undefined","concat","selector","params","resetRecomputations","createSelectorCreator","func","lastArgs","lastResult","getUsers","state","usersPage","u","getUsersPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","isFetching","getFollowingInProgress","props","getNewPage","setFollow","setUnfollow","this","requestUsers","Preloader","React","Component","compose","connect"],"mappings":"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","file":"static/js/3.37068a24.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"paggination\":\"Paggination_paggination__HSBs8\",\"selectedPage\":\"Paggination_selectedPage__3Vi8A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"User_userPhoto__2lX0M\",\"userAvatar\":\"User_userAvatar__RlyvW\",\"userInfo\":\"User_userInfo__2iDE0\",\"userInfoTitle\":\"User_userInfoTitle__3FREk\",\"followingBtn\":\"User_followingBtn__38nFv\"};","import React, { useState } from 'react'\nimport s from './Paggination.module.css'\n\nconst Paggination = ({ totalItemsCount, pageSize, currentPage, onPageChanged, portionSize = 10 }) => {\n\n   let pagesCount = Math.ceil(totalItemsCount / pageSize)\n   let pages = []\n   for (let i = 1; i <= pagesCount; i++) {\n      pages.push(i)\n   }\n\n   let portionCount = Math.ceil(pagesCount / portionSize)\n   let [portionNumber, setPortionNumber] = useState(1)\n   let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\n   let rightPortionPageNumber = portionNumber * portionSize\n\n   let pagesList = pages\n      .filter(page => page >= leftPortionPageNumber && page <= rightPortionPageNumber)\n      .map(page => {\n         return (\n            <span className={currentPage === page ? s.selectedPage : ''} key={page}\n               onClick={() => { onPageChanged(page) }}>{page}\n            </span>\n         )\n      })\n\n   return (\n      <div className={s.paggination}>\n         {\n            <button onClick={() => { setPortionNumber(portionNumber - 1) }} disabled={portionNumber <= 1}>PREV</button>\n         }\n         {pagesList}\n         {\n            <button onClick={() => { setPortionNumber(portionNumber + 1) }} disabled={portionCount <= portionNumber}>NEXT</button>\n         }\n      </div>\n   )\n}\n\nexport default Paggination","import React from 'react'\nimport s from './User.module.css'\nimport { NavLink } from 'react-router-dom'\nimport defaultUserPhoto from '../../../assets/images/default-avatar-icon.png'\nimport Button from './../../../elements/Button'\nimport styled from 'styled-components'\n\nlet ListItem = styled.li`\n   display: flex;\n   justify-content: space-between;\n   align-items: center;\n   padding: 5px;\n   border: 1px solid #ccc;\n`\n\nconst User = ({userId, smallPhoto, name, status, followed, followingInProgress, onUnfollow, onFollow}) => {\n   return (\n      <ListItem id={userId}>\n         <div className={s.userPhoto}>\n            <NavLink to={'/profile/' + userId}>\n               <img className={s.userAvatar} src={smallPhoto != null ? smallPhoto : defaultUserPhoto} alt='avatar'></img>\n            </NavLink>\n         </div>\n         <div className={s.userInfo}>\n            <span className={s.userInfoName}>{name}</span>\n            <span className={s.userInfoTitle}>{status}</span>\n         </div>\n         <div className={s.followingBtn}>\n            {followed\n               ?  <Button disabled={followingInProgress.some(id => id === userId)} onClick={() => { onUnfollow(userId) }}>\n                     unfollow\n                  </Button>\n               :  <Button disabled={followingInProgress.some(id => id === userId)} onClick={() => { onFollow(userId) }}>\n                     follow\n                  </Button>\n            }\n         </div>\n      </ListItem>\n   )\n}\nexport default User","import styled from 'styled-components'\r\n\r\nexport const UsersContainer = styled.div`\r\n    \r\n`\r\nexport const Controls = styled.div`\r\n\r\n`\r\n\r\nexport const UsersList = styled.ul`\r\n   display: grid;\r\n   grid-gap: 5px;\r\n   margin: 0;\r\n   padding: 0;\r\n   list-style: none;\r\n`","import React from 'react'\nimport Paggination from './../common/Paggination/Paggination'\nimport User from './User/User'\n\nimport { UsersContainer, Controls, UsersList } from './Users.styles'\n\n\nconst Users = ({ users, onFollow, onUnfollow, followingInProgress, totalUsersCount, pageSize, currentPage, onPageChanged }) => {\n   return (\n      <UsersContainer>\n         <Controls>\n            <Paggination totalItemsCount={totalUsersCount}\n               pageSize={pageSize}\n               currentPage={currentPage}\n               onPageChanged={onPageChanged}\n            />\n         </Controls>\n         <UsersList>\n            {users.map(item =>\n               <User key={item.id} userId={item.id} name={item.name} smallPhoto={item.photos.small} followed={item.followed} status={item.status}\n                  onFollow={onFollow}\n                  onUnfollow={onUnfollow}\n                  followingInProgress={followingInProgress}\n               />)\n            }\n         </UsersList>\n      </UsersContainer>\n   )\n}\n\nexport default Users","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nexport var createSelector = createSelectorCreator(defaultMemoize);\n\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import { createSelector } from \"reselect\"\n\nconst getUsersSelector = (state) => {\n    return state.usersPage.users\n}\nexport const getUsers = createSelector(\n    [getUsersSelector],\n    (users) => {\n        return users.filter(u => true)\n    }\n)\n\n\nexport const getUsersPageSize = (state) => {\n    return state.usersPage.pageSize\n}\nexport const getTotalUsersCount = (state) => {\n    return state.usersPage.totalUsersCount\n}\nexport const getCurrentPage = (state) => {\n    return state.usersPage.currentPage\n}\nexport const getIsFetching = (state) => {\n    return state.usersPage.isFetching\n}\nexport const getFollowingInProgress = (state) => {\n    return state.usersPage.followingInProgress\n}\n\n\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { requestUsers, getNewPage, setFollow, setUnfollow } from '../../redux/users-reducer'\nimport Users from './Users'\nimport Preloader from '../common/Preloader/Preloader'\nimport { compose } from 'redux'\nimport { getUsers, getUsersPageSize, getTotalUsersCount, getCurrentPage, getIsFetching, getFollowingInProgress } from '../../redux/users-selectors'\n\nclass UsersContainer extends React.Component {\n   componentDidMount() {\n      this.props.requestUsers(this.props.pageSize, this.props.currentPage)\n   }\n   onPageChanged = (page) => {\n      this.props.getNewPage(this.props.pageSize, page)\n   }\n   onFollow = (userId) => {\n      this.props.setFollow(userId)\n   }\n   onUnfollow = (userId) => {\n      this.props.setUnfollow(userId)\n   }\n   render() {\n      return (\n         <>\n            {this.props.isFetching \n               ? <Preloader /> \n               : null\n            }\n            <Users {...this.props}\n               onPageChanged={this.onPageChanged}\n               onFollow={this.onFollow}\n               onUnfollow={this.onUnfollow} />\n         </>\n      )\n   }\n}\n\nlet mapStateToProps = (state) => {\n   return ({\n      users: getUsers(state),\n      pageSize: getUsersPageSize(state),\n      totalUsersCount: getTotalUsersCount(state),\n      currentPage: getCurrentPage(state),\n      isFetching: getIsFetching(state),\n      followingInProgress: getFollowingInProgress(state)\n   })\n}\nexport default compose(\n   connect(mapStateToProps, {\n      requestUsers,\n      getNewPage,\n      setFollow,\n      setUnfollow\n   })\n)(UsersContainer)\n\n\n\n// export default connect(mapStateToProps, {\n//    getUsers, //thunk\n//    getNewPage, //thunk\n//    setFollow, //thunk\n//    setUnfollow //thunk\n// })(UsersContainer)\n\n// let mapDispatchToProps = (dispatch) => {\n//    return {\n//       followUser: (userId) => {\n//          dispatch(followAC(userId))\n//       },\n//       unfollowUser: (userId) => {\n//          dispatch(unfollowAC(userId))\n//       },\n//       setUsers: (users) => {\n//          dispatch(setUsersAC(users))\n//       },\n//       setCurrentUsersPage: (pageNumber) => {\n//          dispatch(setCurrentUsersPageAC(pageNumber))\n//       },\n//       toggleIsFetching: (isFetching) => {\n//          dispatch(setIsFetchingAC(isFetching))\n//       }\n//    }\n// }"],"sourceRoot":""}